<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoShop Pro - Advanced Photo Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
            background: #1a1a1a;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        .app-container {
            display: grid;
            grid-template-areas: 
                "menubar menubar menubar menubar"
                "toolbar toolbar toolbar toolbar"
                "tools canvas canvas layers"
                "status status status status";
            grid-template-columns: 280px 1fr 1fr 250px;
            grid-template-rows: 32px 48px 1fr 24px;
            height: 100vh;
            gap: 1px;
            background: #000;
        }

        /* Menu Bar */
        .menubar {
            grid-area: menubar;
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            display: flex;
            align-items: center;
            padding: 0 1rem;
            border-bottom: 1px solid #2d3748;
            font-size: 0.8rem;
        }

        .menu-item {
            padding: 0.25rem 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
            position: relative;
        }

        .menu-item:hover {
            background: rgba(96, 165, 250, 0.1);
            color: #60a5fa;
        }

        .menu-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: #2d3748;
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 0.5rem 0;
            min-width: 150px;
            z-index: 1000;
            display: none;
        }

        .menu-dropdown.show {
            display: block;
        }

        .menu-dropdown-item {
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-dropdown-item:hover {
            background: #60a5fa;
            color: #1a202c;
        }

        .shortcut {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        /* Main Toolbar */
        .main-toolbar {
            grid-area: toolbar;
            background: #2d3748;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0 1rem;
            border-bottom: 1px solid #4a5568;
        }

        .toolbar-group {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem;
            background: rgba(96, 165, 250, 0.05);
            border-radius: 6px;
            border: 1px solid rgba(96, 165, 250, 0.1);
        }

        .toolbar-btn {
            padding: 0.5rem;
            background: #4a5568;
            border: none;
            border-radius: 4px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            min-width: 32px;
            height: 32px;
        }

        .toolbar-btn:hover {
            background: #60a5fa;
            transform: translateY(-1px);
        }

        .toolbar-btn.active {
            background: #3182ce;
            box-shadow: 0 0 0 2px #60a5fa;
        }

        .toolbar-separator {
            width: 1px;
            height: 20px;
            background: #4a5568;
            margin: 0 0.5rem;
        }

        /* Quick Actions Toolbar */
        .quick-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
        }

        .color-indicator {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: 2px solid #4a5568;
            cursor: pointer;
            position: relative;
        }

        .color-indicator.foreground {
            z-index: 2;
        }

        .color-indicator.background {
            margin-left: -16px;
            z-index: 1;
        }

        /* Enhanced Sidebar */
        .sidebar {
            grid-area: tools;
            background: #2d3748;
            overflow-y: auto;
            border-right: 1px solid #4a5568;
        }

        .sidebar-tabs {
            display: flex;
            background: #1a202c;
            border-bottom: 1px solid #4a5568;
        }

        .sidebar-tab {
            flex: 1;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            font-size: 0.8rem;
            background: none;
            border: none;
            color: #a0aec0;
            transition: all 0.2s;
        }

        .sidebar-tab.active {
            background: #2d3748;
            color: #60a5fa;
        }

        .sidebar-tab:hover {
            background: #374151;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .sidebar-section {
            border-bottom: 1px solid #4a5568;
            padding: 1rem;
        }

        .section-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #a0aec0;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .collapsible-section {
            cursor: pointer;
        }

        .collapsible-section::after {
            content: '‚ñº';
            font-size: 0.7rem;
            transition: transform 0.2s;
        }

        .collapsible-section.collapsed::after {
            transform: rotate(-90deg);
        }

        .section-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.collapsed {
            max-height: 0;
        }

        .tool-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.25rem;
            margin-bottom: 0.75rem;
        }

        .tool-btn {
            aspect-ratio: 1;
            background: #4a5568;
            border: none;
            border-radius: 6px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            position: relative;
        }

        .tool-btn:hover {
            background: #60a5fa;
            transform: translateY(-1px);
        }

        .tool-btn.active {
            background: #3182ce;
            box-shadow: 0 0 0 2px #60a5fa;
        }

        .tool-btn::before {
            content: attr(data-tooltip);
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #1a202c;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            white-space: nowrap;
            z-index: 1000;
        }

        .tool-btn:hover::before {
            opacity: 1;
        }

        .control-group {
            margin-bottom: 0.75rem;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: #a0aec0;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .control-value {
            font-size: 0.7rem;
            color: #60a5fa;
            background: #1a202c;
            padding: 2px 6px;
            border-radius: 3px;
            min-width: 30px;
            text-align: center;
        }

        .control-input {
            width: 100%;
            padding: 0.5rem;
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 4px;
            color: #fff;
            font-size: 0.8rem;
        }

        .control-input:focus {
            outline: none;
            border-color: #60a5fa;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
        }

        .slider-container {
            position: relative;
        }

        .slider {
            width: 100%;
            height: 4px;
            background: #4a5568;
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #60a5fa;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
        }

        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #60a5fa;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
        }

        .color-picker-container {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 0.5rem;
            align-items: center;
        }

        .color-picker {
            width: 100%;
            height: 32px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .color-value {
            font-size: 0.7rem;
            color: #a0aec0;
            font-family: 'SF Mono', Monaco, monospace;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.25rem;
        }

        .filter-btn {
            padding: 0.5rem 0.75rem;
            background: #4a5568;
            border: none;
            border-radius: 4px;
            color: #e2e8f0;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-btn:hover {
            background: #60a5fa;
        }

        /* Enhanced Canvas Area */
        .canvas-area {
            grid-area: canvas;
            background: #1a202c;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .canvas-toolbar {
            background: #2d3748;
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #4a5568;
            min-height: 40px;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .zoom-btn {
            padding: 0.25rem 0.5rem;
            background: #4a5568;
            border: none;
            border-radius: 3px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.8rem;
        }

        .zoom-btn:hover {
            background: #60a5fa;
        }

        .zoom-level {
            font-size: 0.8rem;
            color: #a0aec0;
            min-width: 50px;
            text-align: center;
            background: #1a202c;
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
        }

        .canvas-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.75rem;
            color: #a0aec0;
        }

        .canvas-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: auto;
            background: 
                radial-gradient(circle at 10px 10px, #374151 1px, transparent 0),
                radial-gradient(circle at 5px 5px, #374151 1px, transparent 0);
            background-size: 10px 10px;
            background-position: 0 0, 5px 5px;
        }

        #canvas {
            border-radius: 2px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            cursor: crosshair;
            max-width: none;
            max-height: none;
        }

        /* Rulers */
        .ruler-horizontal {
            position: absolute;
            top: 0;
            left: 50px;
            right: 0;
            height: 20px;
            background: #2d3748;
            border-bottom: 1px solid #4a5568;
            display: none;
        }

        .ruler-vertical {
            position: absolute;
            top: 20px;
            left: 0;
            bottom: 0;
            width: 50px;
            background: #2d3748;
            border-right: 1px solid #4a5568;
            display: none;
        }

        .rulers-visible .ruler-horizontal,
        .rulers-visible .ruler-vertical {
            display: block;
        }

        .rulers-visible .canvas-container {
            top: 20px;
            left: 50px;
        }

        /* Layers Panel */
        .layers-panel {
            grid-area: layers;
            background: #2d3748;
            border-left: 1px solid #4a5568;
            display: flex;
            flex-direction: column;
        }

        .layers-header {
            padding: 0.5rem;
            border-bottom: 1px solid #4a5568;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .layers-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #a0aec0;
        }

        .layer-controls {
            display: flex;
            gap: 0.25rem;
        }

        .layer-control-btn {
            padding: 0.25rem;
            background: #4a5568;
            border: none;
            border-radius: 3px;
            color: #e2e8f0;
            cursor: pointer;
            font-size: 0.8rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .layer-control-btn:hover {
            background: #60a5fa;
        }

        .layers-content {
            flex: 1;
            overflow-y: auto;
        }

        .layer-item {
            padding: 0.5rem;
            border-bottom: 1px solid #4a5568;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .layer-item:hover {
            background: #374151;
        }

        .layer-item.active {
            background: #60a5fa;
            color: #1a202c;
        }

        .layer-visibility {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .layer-preview {
            width: 32px;
            height: 32px;
            background: #4a5568;
            border-radius: 3px;
            flex-shrink: 0;
            border: 1px solid #1a202c;
        }

        .layer-info {
            flex: 1;
            min-width: 0;
        }

        .layer-name {
            font-size: 0.8rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .layer-type {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        .layer-blend {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        /* Status Bar */
        .status-bar {
            grid-area: status;
            background: #2d3748;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.75rem;
            color: #a0aec0;
            border-top: 1px solid #4a5568;
        }

        .status-left {
            display: flex;
            gap: 1rem;
        }

        .status-right {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .progress-container {
            display: none;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-bar {
            width: 100px;
            height: 4px;
            background: #4a5568;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #60a5fa;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Overlays */
        .crop-overlay {
            position: absolute;
            border: 2px dashed #60a5fa;
            background: rgba(96, 165, 250, 0.05);
            pointer-events: none;
            display: none;
        }

        .selection-overlay {
            position: absolute;
            border: 1px dashed #60a5fa;
            background: rgba(96, 165, 250, 0.02);
            pointer-events: none;
            display: none;
        }

        .crop-handle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #60a5fa;
            border: 1px solid #1a202c;
            cursor: nw-resize;
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.open {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-content {
            background: #2d3748;
            border-radius: 8px;
            padding: 1.5rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid #4a5568;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: #a0aec0;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #4a5568;
            color: #fff;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .app-container {
                grid-template-areas: 
                    "menubar menubar menubar"
                    "toolbar toolbar toolbar"
                    "tools canvas layers"
                    "status status status";
                grid-template-columns: 250px 1fr 200px;
            }
        }

        @media (max-width: 1024px) {
            .app-container {
                grid-template-areas: 
                    "menubar menubar"
                    "toolbar toolbar"
                    "tools canvas"
                    "status status";
                grid-template-columns: 250px 1fr;
            }
            
            .layers-panel {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-areas: 
                    "menubar"
                    "toolbar"
                    "canvas"
                    "status";
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -250px;
                top: 80px;
                bottom: 24px;
                width: 250px;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .sidebar.open {
                left: 0;
            }

            .main-toolbar {
                flex-wrap: wrap;
                min-height: 48px;
            }
        }

        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        /* Context Menus */
        .context-menu {
            position: absolute;
            background: #2d3748;
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 0.25rem 0;
            min-width: 150px;
            z-index: 1500;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .context-menu.show {
            display: block;
        }

        .context-menu-item {
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .context-menu-item:hover {
            background: #60a5fa;
            color: #1a202c;
        }

        .context-menu-separator {
            height: 1px;
            background: #4a5568;
            margin: 0.25rem 0;
        }

        /* Advanced Controls */
        .advanced-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .control-button {
            padding: 0.5rem;
            background: #4a5568;
            border: none;
            border-radius: 4px;
            color: #e2e8f0;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .control-button:hover {
            background: #60a5fa;
        }

        .blend-mode-select {
            width: 100%;
            padding: 0.25rem;
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 4px;
            color: #fff;
            font-size: 0.75rem;
        }

        /* Brush Presets */
        .brush-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.25rem;
        }

        .brush-preset {
            aspect-ratio: 1;
            background: #4a5568;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .brush-preset:hover {
            background: #60a5fa;
        }

        .brush-preset.active {
            background: #3182ce;
            box-shadow: 0 0 0 2px #60a5fa;
        }

        /* Color Swatches */
        .color-swatches {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            margin-top: 0.5rem;
        }

        .color-swatch {
            aspect-ratio: 1;
            border-radius: 2px;
            cursor: pointer;
            border: 1px solid #4a5568;
            transition: transform 0.1s;
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        /* Mini Map */
        .mini-map {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            width: 120px;
            height: 90px;
            background: rgba(45, 55, 72, 0.9);
            border: 1px solid #4a5568;
            border-radius: 4px;
            overflow: hidden;
            display: none;
        }

        .mini-map.show {
            display: block;
        }

        .mini-map-canvas {
            width: 100%;
            height: 100%;
        }

        .mini-map-viewport {
            position: absolute;
            border: 1px solid #60a5fa;
            background: rgba(96, 165, 250, 0.1);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Menu Bar -->
        <div class="menubar">
            <div class="menu-item" data-menu="file">
                File
                <div class="menu-dropdown" id="fileMenu">
                    <div class="menu-dropdown-item" onclick="editor.newDocument()">
                        New <span class="shortcut">Ctrl+N</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.openFile()">
                        Open <span class="shortcut">Ctrl+O</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.saveFile()">
                        Save <span class="shortcut">Ctrl+S</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.exportFile()">
                        Export <span class="shortcut">Ctrl+E</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.quit()">
                        Quit <span class="shortcut">Ctrl+Q</span>
                    </div>
                </div>
            </div>
            <div class="menu-item" data-menu="edit">
                Edit
                <div class="menu-dropdown" id="editMenu">
                    <div class="menu-dropdown-item" onclick="editor.undo()">
                        Undo <span class="shortcut">Ctrl+Z</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.redo()">
                        Redo <span class="shortcut">Ctrl+Y</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.cut()">
                        Cut <span class="shortcut">Ctrl+X</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.copy()">
                        Copy <span class="shortcut">Ctrl+C</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.paste()">
                        Paste <span class="shortcut">Ctrl+V</span>
                    </div>
                </div>
            </div>
            <div class="menu-item" data-menu="view">
                View
                <div class="menu-dropdown" id="viewMenu">
                    <div class="menu-dropdown-item" onclick="editor.toggleRulers()">
                        Show Rulers <span class="shortcut">Ctrl+R</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.toggleGrid()">
                        Show Grid <span class="shortcut">Ctrl+G</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.toggleMiniMap()">
                        Show Mini Map <span class="shortcut">Ctrl+M</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.fitToScreen()">
                        Fit to Screen <span class="shortcut">Ctrl+0</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.actualSize()">
                        Actual Size <span class="shortcut">Ctrl+1</span>
                    </div>
                </div>
            </div>
            <div class="menu-item" data-menu="layer">
                Layer
                <div class="menu-dropdown" id="layerMenu">
                    <div class="menu-dropdown-item" onclick="editor.addLayer()">
                        New Layer <span class="shortcut">Shift+Ctrl+N</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.duplicateLayer()">
                        Duplicate Layer <span class="shortcut">Ctrl+J</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.deleteLayer()">
                        Delete Layer <span class="shortcut">Del</span>
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.mergeDown()">
                        Merge Down <span class="shortcut">Ctrl+E</span>
                    </div>
                </div>
            </div>
            <div class="menu-item" data-menu="filter">
                Filter
                <div class="menu-dropdown" id="filterMenu">
                    <div class="menu-dropdown-item" onclick="editor.applyFilter('blur')">
                        Gaussian Blur
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.applyFilter('sharpen')">
                        Unsharp Mask
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.applyFilter('noise')">
                        Add Noise
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.applyFilter('emboss')">
                        Emboss
                    </div>
                </div>
            </div>
            <div class="menu-item" data-menu="help">
                Help
                <div class="menu-dropdown" id="helpMenu">
                    <div class="menu-dropdown-item" onclick="editor.showKeyboardShortcuts()">
                        Keyboard Shortcuts
                    </div>
                    <div class="menu-dropdown-item" onclick="editor.showAbout()">
                        About PhotoShop Pro
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Toolbar -->
        <div class="main-toolbar">
            <!-- File Operations -->
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="editor.newDocument()" data-tooltip="New (Ctrl+N)">üìÑ</button>
                <button class="toolbar-btn" onclick="editor.openFile()" data-tooltip="Open (Ctrl+O)">üìÇ</button>
                <button class="toolbar-btn" onclick="editor.saveFile()" data-tooltip="Save (Ctrl+S)">üíæ</button>
                <button class="toolbar-btn" onclick="editor.exportFile()" data-tooltip="Export (Ctrl+E)">üì§</button>
            </div>

            <div class="toolbar-separator"></div>

            <!-- Edit Operations -->
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="editor.undo()" data-tooltip="Undo (Ctrl+Z)" id="undoBtn">‚Ü∂</button>
                <button class="toolbar-btn" onclick="editor.redo()" data-tooltip="Redo (Ctrl+Y)" id="redoBtn">‚Ü∑</button>
                <button class="toolbar-btn" onclick="editor.cut()" data-tooltip="Cut (Ctrl+X)">‚úÇÔ∏è</button>
                <button class="toolbar-btn" onclick="editor.copy()" data-tooltip="Copy (Ctrl+C)">üìã</button>
                <button class="toolbar-btn" onclick="editor.paste()" data-tooltip="Paste (Ctrl+V)">üìå</button>
            </div>

            <div class="toolbar-separator"></div>

            <!-- Quick Tools -->
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="editor.selectTool('select')" data-tooltip="Select Tool (V)">üîç</button>
                <button class="toolbar-btn" onclick="editor.selectTool('brush')" data-tooltip="Brush Tool (B)">üñåÔ∏è</button>
                <button class="toolbar-btn" onclick="editor.selectTool('eraser')" data-tooltip="Eraser Tool (E)">üßΩ</button>
                <button class="toolbar-btn" onclick="editor.selectTool('text')" data-tooltip="Text Tool (T)">üìù</button>
                <button class="toolbar-btn" onclick="editor.selectTool('crop')" data-tooltip="Crop Tool (C)">‚úÇÔ∏è</button>
            </div>

            <div class="toolbar-separator"></div>

            <!-- Transform -->
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="editor.flipHorizontal()" data-tooltip="Flip Horizontal">‚ü∑</button>
                <button class="toolbar-btn" onclick="editor.flipVertical()" data-tooltip="Flip Vertical">‚ÜïÔ∏è</button>
                <button class="toolbar-btn" onclick="editor.rotate(-90)" data-tooltip="Rotate Left">‚Ü∫</button>
                <button class="toolbar-btn" onclick="editor.rotate(90)" data-tooltip="Rotate Right">‚Üª</button>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="color-indicator foreground" id="foregroundIndicator" onclick="document.getElementById('foregroundColor').click()"></div>
                <div class="color-indicator background" id="backgroundIndicator" onclick="document.getElementById('backgroundColor').click()"></div>
                
                <button class="toolbar-btn" onclick="editor.toggleFullscreen()" data-tooltip="Toggle Fullscreen (F11)">‚õ∂</button>
                <button class="toolbar-btn" onclick="toggleSidebar()" data-tooltip="Toggle Sidebar">‚ò∞</button>
            </div>
        </div>

        <!-- Enhanced Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="tools">Tools</button>
                <button class="sidebar-tab" data-tab="adjust">Adjust</button>
                <button class="sidebar-tab" data-tab="filters">Filters</button>
                <button class="sidebar-tab" data-tab="presets">Presets</button>
            </div>

            <!-- Tools Tab -->
            <div class="tab-content active" id="toolsTab">
                <div class="sidebar-section">
                    <div class="section-title collapsible-section" onclick="toggleSection(this)">Selection Tools</div>
                    <div class="section-content">
                        <div class="tool-grid">
                            <button class="tool-btn active" data-tool="select" data-tooltip="Rectangle Select">üîç</button>
                            <button class="tool-btn" data-tool="lasso" data-tooltip="Lasso Select">üéØ</button>
                            <button class="tool-btn" data-tool="magic" data-tooltip="Magic Wand">ü™Ñ</button>
                            <button class="tool-btn" data-tool="move" data-tooltip="Move Tool">‚úã</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title collapsible-section" onclick="toggleSection(this)">Paint Tools</div>
                    <div class="section-content">
                        <div class="tool-grid">
                            <button class="tool-btn" data-tool="brush" data-tooltip="Brush">üñåÔ∏è</button>
                            <button class="tool-btn" data-tool="pencil" data-tooltip="Pencil">‚úèÔ∏è</button>
                            <button class="tool-btn" data-tool="airbrush" data-tooltip="Airbrush">üí®</button>
                            <button class="tool-btn" data-tool="watercolor" data-tooltip="Watercolor">üé®</button>
                            <button class="tool-btn" data-tool="eraser" data-tooltip="Eraser">üßΩ</button>
                            <button class="tool-btn" data-tool="bucket" data-tooltip="Paint Bucket">ü™£</button>
                            <button class="tool-btn" data-tool="gradient" data-tooltip="Gradient">üåà</button>
                            <button class="tool-btn" data-tool="eyedropper" data-tooltip="Eyedropper">üíâ</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title collapsible-section" onclick="toggleSection(this)">Retouch Tools</div>
                    <div class="section-content">
                        <div class="tool-grid">
                            <button class="tool-btn" data-tool="clone" data-tooltip="Clone Stamp">üëØ</button>
                            <button class="tool-btn" data-tool="healing" data-tooltip="Healing Brush">üíä</button>
                            <button class="tool-btn" data-tool="patch" data-tooltip="Patch Tool">ü©π</button>
                            <button class="tool-btn" data-tool="blur" data-tooltip="Blur">üå´Ô∏è</button>
                            <button class="tool-btn" data-tool="sharpen" data-tooltip="Sharpen">üî™</button>
                            <button class="tool-btn" data-tool="smudge" data-tooltip="Smudge">üëÜ</button>
                            <button class="tool-btn" data-tool="dodge" data-tooltip="Dodge">‚òÄÔ∏è</button>
                            <button class="tool-btn" data-tool="burn" data-tooltip="Burn">üî•</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title collapsible-section" onclick="toggleSection(this)">Vector Tools</div>
                    <div class="section-content">
                        <div class="tool-grid">
                            <button class="tool-btn" data-tool="pen" data-tooltip="Pen Tool">üñäÔ∏è</button>
                            <button class="tool-btn" data-tool="text" data-tooltip="Text Tool">üìù</button>
                            <button class="tool-btn" data-tool="shape" data-tooltip="Shape Tool">üî∫</button>
                            <button class="tool-btn" data-tool="line" data-tooltip="Line Tool">üìè</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title collapsible-section" onclick="toggleSection(this)">Transform Tools</div>
                    <div class="section-content">
                        <div class="tool-grid">
                            <button class="tool-btn" data-tool="crop" data-tooltip="Crop">‚úÇÔ∏è</button>
                            <button class="tool-btn" data-tool="rotate" data-tooltip="Rotate">üîÑ</button>
                            <button class="tool-btn" data-tool="scale" data-tooltip="Scale">üìê</button>
                            <button class="tool-btn" data-tool="perspective" data-tooltip="Perspective">üè†</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Brush Settings</div>
                    <div class="control-group">
                        <label class="control-label">
                            Size <span class="control-value" id="brushSizeValue">10</span>
                        </label>
                        <input type="range" id="brushSize" class="slider" min="1" max="200" value="10">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Hardness <span class="control-value" id="brushHardnessValue">100</span>
                        </label>
                        <input type="range" id="brushHardness" class="slider" min="0" max="100" value="100">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Opacity <span class="control-value" id="brushOpacityValue">100</span>
                        </label>
                        <input type="range" id="brushOpacity" class="slider" min="0" max="100" value="100">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Flow <span class="control-value" id="brushFlowValue">100</span>
                        </label>
                        <input type="range" id="brushFlow" class="slider" min="1" max="100" value="100">
                    </div>
                    <div class="control-group">
                        <label class="control-label">Spacing</label>
                        <input type="range" id="brushSpacing" class="slider" min="1" max="100" value="25">
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Brush Presets</div>
                    <div class="brush-presets">
                        <button class="brush-preset active" data-preset="round"></button>
                        <button class="brush-preset" data-preset="square"></button>
                        <button class="brush-preset" data-preset="soft"></button>
                        <button class="brush-preset" data-preset="texture1"></button>
                        <button class="brush-preset" data-preset="texture2"></button>
                        <button class="brush-preset" data-preset="scatter"></button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Colors</div>
                    <div class="color-picker-container">
                        <input type="color" id="foregroundColor" class="color-picker" value="#000000">
                        <div class="color-value" id="foregroundValue">#000000</div>
                    </div>
                    <div class="color-picker-container" style="margin-top: 0.5rem;">
                        <input type="color" id="backgroundColor" class="color-picker" value="#ffffff">
                        <div class="color-value" id="backgroundValue">#ffffff</div>
                    </div>
                    
                    <div class="color-swatches">
                        <div class="color-swatch" style="background: #000000" data-color="#000000"></div>
                        <div class="color-swatch" style="background: #ffffff" data-color="#ffffff"></div>
                        <div class="color-swatch" style="background: #ff0000" data-color="#ff0000"></div>
                        <div class="color-swatch" style="background: #00ff00" data-color="#00ff00"></div>
                        <div class="color-swatch" style="background: #0000ff" data-color="#0000ff"></div>
                        <div class="color-swatch" style="background: #ffff00" data-color="#ffff00"></div>
                        <div class="color-swatch" style="background: #ff00ff" data-color="#ff00ff"></div>
                        <div class="color-swatch" style="background: #00ffff" data-color="#00ffff"></div>
                        <div class="color-swatch" style="background: #808080" data-color="#808080"></div>
                        <div class="color-swatch" style="background: #800000" data-color="#800000"></div>
                        <div class="color-swatch" style="background: #008000" data-color="#008000"></div>
                        <div class="color-swatch" style="background: #000080" data-color="#000080"></div>
                        <div class="color-swatch" style="background: #808000" data-color="#808000"></div>
                        <div class="color-swatch" style="background: #800080" data-color="#800080"></div>
                        <div class="color-swatch" style="background: #008080" data-color="#008080"></div>
                        <div class="color-swatch" style="background: #c0c0c0" data-color="#c0c0c0"></div>
                    </div>
                </div>
            </div>

            <!-- Adjustments Tab -->
            <div class="tab-content" id="adjustTab">
                <div class="sidebar-section">
                    <div class="section-title">Basic Adjustments</div>
                    <div class="control-group">
                        <label class="control-label">
                            Brightness <span class="control-value" id="brightnessValue">0</span>
                        </label>
                        <input type="range" id="brightness" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Contrast <span class="control-value" id="contrastValue">0</span>
                        </label>
                        <input type="range" id="contrast" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Saturation <span class="control-value" id="saturationValue">0</span>
                        </label>
                        <input type="range" id="saturation" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Hue <span class="control-value" id="hueValue">0</span>
                        </label>
                        <input type="range" id="hue" class="slider" min="-180" max="180" value="0">
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Advanced Adjustments</div>
                    <div class="control-group">
                        <label class="control-label">
                            Highlights <span class="control-value" id="highlightsValue">0</span>
                        </label>
                        <input type="range" id="highlights" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Shadows <span class="control-value" id="shadowsValue">0</span>
                        </label>
                        <input type="range" id="shadows" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Vibrance <span class="control-value" id="vibranceValue">0</span>
                        </label>
                        <input type="range" id="vibrance" class="slider" min="-100" max="100" value="0">
                    </div>
                    <div class="control-group">
                        <label class="control-label">
                            Clarity <span class="control-value" id="clarityValue">0</span>
                        </label>
                        <input type="range" id="clarity" class="slider" min="-100" max="100" value="0">
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Curves</div>
                    <canvas id="curvesCanvas" width="200" height="150" style="width: 100%; background: #1a202c; border-radius: 4px; cursor: crosshair;"></canvas>
                    <div class="advanced-controls" style="margin-top: 0.5rem;">
                        <button class="control-button" onclick="editor.resetCurves()">Reset</button>
                        <button class="control-button" onclick="editor.autoAdjustCurves()">Auto</button>
                    </div>
                </div>
            </div>

            <!-- Filters Tab -->
            <div class="tab-content" id="filtersTab">
                <div class="sidebar-section">
                    <div class="section-title">Artistic Filters</div>
                    <div class="filter-grid">
                        <button class="filter-btn" data-filter="oil">üé® Oil Painting</button>
                        <button class="filter-btn" data-filter="watercolor">üñºÔ∏è Watercolor</button>
                        <button class="filter-btn" data-filter="sketch">‚úèÔ∏è Sketch</button>
                        <button class="filter-btn" data-filter="cartoon">üé≠ Cartoon</button>
                        <button class="filter-btn" data-filter="vintage">üì∏ Vintage</button>
                        <button class="filter-btn" data-filter="sepia">üü§ Sepia</button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Enhancement Filters</div>
                    <div class="filter-grid">
                        <button class="filter-btn" data-filter="sharpen">üî™ Sharpen</button>
                        <button class="filter-btn" data-filter="blur">üå´Ô∏è Blur</button>
                        <button class="filter-btn" data-filter="denoise">üì≥ Denoise</button>
                        <button class="filter-btn" data-filter="enhance">‚ú® Auto Enhance</button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Color Filters</div>
                    <div class="filter-grid">
                        <button class="filter-btn" data-filter="grayscale">üî≥ Grayscale</button>
                        <button class="filter-btn" data-filter="invert">üîÑ Invert</button>
                        <button class="filter-btn" data-filter="colorize">üåà Colorize</button>
                        <button class="filter-btn" data-filter="temperature">üå°Ô∏è Temperature</button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Distortion Filters</div>
                    <div class="filter-grid">
                        <button class="filter-btn" data-filter="emboss">‚ö° Emboss</button>
                        <button class="filter-btn" data-filter="edge">üìê Edge Detect</button>
                        <button class="filter-btn" data-filter="pixelate">üî≤ Pixelate</button>
                        <button class="filter-btn" data-filter="noise">üì≥ Add Noise</button>
                        <button class="filter-btn" data-filter="wave">„Ä∞Ô∏è Wave</button>
                        <button class="filter-btn" data-filter="twirl">üåÄ Twirl</button>
                    </div>
                </div>
            </div>

            <!-- Presets Tab -->
            <div class="tab-content" id="presetsTab">
                <div class="sidebar-section">
                    <div class="section-title">Photo Styles</div>
                    <div class="filter-grid">
                        <button class="filter-btn" data-preset="portrait">üë§ Portrait</button>
                        <button class="filter-btn" data-preset="landscape">üèîÔ∏è Landscape</button>
                        <button class="filter-btn" data-preset="street">üèôÔ∏è Street</button>
                        <button class="filter-btn" data-preset="black-white">‚ö´ B&W Classic</button>
                        <button class="filter-btn" data-preset="cinematic">üé¨ Cinematic</button>
                        <button class="filter-btn" data-preset="warm">üî• Warm</button>
                        <button class="filter-btn" data-preset="cool">‚ùÑÔ∏è Cool</button>
                        <button class="filter-btn" data-preset="dramatic">‚ö° Dramatic</button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-title">Custom Presets</div>
                    <div class="advanced-controls">
                        <button class="control-button" onclick="editor.savePreset()">Save Preset</button>
                        <button class="control-button" onclick="editor.loadPreset()">Load Preset</button>
                    </div>
                    <div id="customPresetsList" class="filter-grid" style="margin-top: 0.5rem;">
                        <!-- Custom presets will be added here dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="ruler-horizontal" id="rulerH"></div>
            <div class="ruler-vertical" id="rulerV"></div>
            
            <div class="canvas-toolbar">
                <div class="zoom-controls">
                    <button class="zoom-btn" id="zoomOut" onclick="editor.zoomOut()">‚àí</button>
                    <div class="zoom-level" id="zoomLevel">100%</div>
                    <button class="zoom-btn" id="zoomIn" onclick="editor.zoomIn()">+</button>
                    <button class="zoom-btn" id="fitToScreen" onclick="editor.fitToScreen()">Fit</button>
                    <button class="zoom-btn" id="actualSize" onclick="editor.actualSize()">1:1</button>
                </div>
                
                <div class="canvas-info">
                    <span>Canvas: <span id="canvasSize">800 √ó 600</span></span>
                    <span>Position: <span id="mousePos">0, 0</span></span>
                    <span>Selection: <span id="selectionInfo">None</span></span>
                </div>
            </div>
            
            <div class="canvas-container" id="canvasContainer">
                <canvas id="canvas"></canvas>
                <div class="crop-overlay" id="cropOverlay">
                    <div class="crop-handle" style="top: -4px; left: -4px;"></div>
                    <div class="crop-handle" style="top: -4px; right: -4px;"></div>
                    <div class="crop-handle" style="bottom: -4px; left: -4px;"></div>
                    <div class="crop-handle" style="bottom: -4px; right: -4px;"></div>
                </div>
                <div class="selection-overlay" id="selectionOverlay"></div>
            </div>

            <!-- Mini Map -->
            <div class="mini-map" id="miniMap">
                <canvas class="mini-map-canvas" id="miniMapCanvas"></canvas>
                <div class="mini-map-viewport" id="miniMapViewport"></div>
            </div>
        </div>

        <!-- Layers Panel -->
        <div class="layers-panel">
            <div class="layers-header">
                <div class="layers-title">Layers</div>
                <div class="layer-controls">
                    <button class="layer-control-btn" onclick="editor.addLayer()" data-tooltip="New Layer">+</button>
                    <button class="layer-control-btn" onclick="editor.duplicateLayer()" data-tooltip="Duplicate">‚ßâ</button>
                    <button class="layer-control-btn" onclick="editor.deleteLayer()" data-tooltip="Delete">üóëÔ∏è</button>
                </div>
            </div>
            
            <div class="layers-content" id="layersList">
                <div class="layer-item active" data-layer="0">
                    <div class="layer-visibility">üëÅÔ∏è</div>
                    <div class="layer-preview"></div>
                    <div class="layer-info">
                        <div class="layer-name">Background</div>
                        <div class="layer-type">Image ‚Ä¢ </div>
                        <div class="layer-blend">Normal</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="section-title">Layer Properties</div>
                <div class="control-group">
                    <label class="control-label">
                        Opacity <span class="control-value" id="layerOpacityValue">100</span>
                    </label>
                    <input type="range" id="layerOpacity" class="slider" min="0" max="100" value="100">
                </div>
                <div class="control-group">
                    <label class="control-label">Blend Mode</label>
                    <select class="blend-mode-select" id="blendMode">
                        <option value="normal">Normal</option>
                        <option value="multiply">Multiply</option>
                        <option value="screen">Screen</option>
                        <option value="overlay">Overlay</option>
                        <option value="soft-light">Soft Light</option>
                        <option value="hard-light">Hard Light</option>
                        <option value="color-dodge">Color Dodge</option>
                        <option value="color-burn">Color Burn</option>
                        <option value="darken">Darken</option>
                        <option value="lighten">Lighten</option>
                        <option value="difference">Difference</option>
                        <option value="exclusion">Exclusion</option>
                    </select>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="section-title">History</div>
                <div class="layers-content" id="historyPanel" style="max-height: 200px;">
                    <div class="layer-item" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                        <div class="layer-info">
                            <div class="layer-name">New Document</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <span>Tool: <span id="currentTool">Select</span></span>
                <span>Zoom: <span id="currentZoom">100%</span></span>
                <span id="documentStatus">Ready</span>
            </div>
            <div class="status-right">
                <div class="progress-container" id="progressContainer">
